# è¦ä½¿ç”¨è¿™ä¸ªparser,åœ¨è®¢é˜…é“¾æ¥åé¢åŠ ä¸Š#parser
# è¿™ä¸ªparseræå–å‡ºClashè®¢é˜…é“¾æ¥ä¸­çš„proxyå¹¶ä¸”å»é™¤æ‰å…¶ä»–çš„ruleså’Œproxy groups
# ç„¶åå†åŠ å…¥è‡ªå®šä¹‰é…ç½®çš„proxy groupså’Œrules
# è¾¾åˆ°ç±»ä¼¼å¼•ç”¨proxy providersçš„æ•ˆæœ
parsers:
  - url: https://cdn.xmrth.one/link/jgy59hnpmyli5fvz?clash=2&extend=1
    yaml:
      prepend-rules:
        - DOMAIN-SUFFIX,googlevideo.com,ğŸ¬Youtube # rulesæœ€å‰é¢å¢åŠ ä¸€ä¸ªè§„åˆ™
        - DOMAIN-SUFFIX,ttvnw.net,ğŸ¬Youtube
        - IP-CIDR,91.108.56.0/22,ğŸ¬Youtube,no-resolve
  # è¿™é‡Œè®¾ç½®å¦‚ä½•åŒ¹é…url,ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨url
  # url: www.url.com
  - reg: ^.*#parser$
  # ä¸‹é¢æ˜¯åˆ é™¤æœåŠ¡å•†è‡ªå¸¦çš„ç­–ç•¥ç»„å’Œè§„åˆ™
    code: |
        module.exports.parse = (raw, { yaml }) => {
          const rawObj = yaml.parse(raw)
          const groups = []
          const rules = []
          return yaml.stringify({ ...rawObj, 'proxy-groups': groups, rules })
        } 
    # å¾€yamlæ–‡ä»¶ä¸­æ·»åŠ é…ç½®
    yaml:
        # å»ºç«‹è‡ªå®šä¹‰çš„proxy groups
        prepend-proxy-groups: # å»ºç«‹ç­–ç•¥ç»„
        - name: ğŸ”°å›½å¤–æµé‡
          type: select
          proxies:
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-ä¸­ç»§åŠ¨æ€
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-ä¸­ç»§NF
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-IPLC
            - ğŸ‡­ğŸ‡°
            - ğŸ‡¹ğŸ‡¼
            - ğŸ‡¸ğŸ‡¬
            - ğŸ‡¯ğŸ‡µ
            - ğŸ‡ºğŸ‡¸
            - ğŸ³ï¸
            - ğŸš€ç›´æ¥è¿æ¥
        - name: ğŸ’¬å›½å¤–åª’ä½“-æ–‡å­—å›¾ç‰‡
          type: select
          proxies:
            - ğŸ”°å›½å¤–æµé‡
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-ä¸­ç»§åŠ¨æ€
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-ä¸­ç»§NF
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-IPLC
            - ğŸ‡­ğŸ‡°
            - ğŸ‡¹ğŸ‡¼
            - ğŸ‡¸ğŸ‡¬
            - ğŸ‡¯ğŸ‡µ
            - ğŸ‡ºğŸ‡¸
            - ğŸ³ï¸
        - name: ğŸ¬å›½å¤–åª’ä½“-è§†é¢‘
          type: select
          proxies:
            - ğŸ”°å›½å¤–æµé‡
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-ä¸­ç»§åŠ¨æ€
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-ä¸­ç»§NF
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-IPLC
            - ğŸ‡­ğŸ‡°
            - ğŸ‡¹ğŸ‡¼
            - ğŸ‡¸ğŸ‡¬
            - ğŸ‡¯ğŸ‡µ
            - ğŸ‡ºğŸ‡¸
            - ğŸ³ï¸
        - name: âš“ï¸å…¶ä»–æµé‡
          type: select
          proxies:
            - ğŸ”°å›½å¤–æµé‡
            - ğŸš€ç›´æ¥è¿æ¥
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-ä¸­ç»§åŠ¨æ€
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-ä¸­ç»§NF
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-IPLC
            - ğŸ‡­ğŸ‡°
            - ğŸ‡¹ğŸ‡¼
            - ğŸ‡¸ğŸ‡¬
            - ğŸ‡¯ğŸ‡µ
            - ğŸ‡ºğŸ‡¸
            - ğŸ³ï¸
        - name: âœˆï¸Telegram
          type: select
          proxies:
            - ğŸ”°å›½å¤–æµé‡
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-ä¸­ç»§åŠ¨æ€
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-ä¸­ç»§NF
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-IPLC
            - ğŸ‡­ğŸ‡°
            - ğŸ‡¹ğŸ‡¼
            - ğŸ‡¸ğŸ‡¬
            - ğŸ‡¯ğŸ‡µ
            - ğŸ‡ºğŸ‡¸
            - ğŸ³ï¸
        - name: ğŸ“½Netflix
          type: select
          proxies:
            - ğŸ”°å›½å¤–æµé‡
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-ä¸­ç»§åŠ¨æ€
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-ä¸­ç»§NF
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-IPLC
            - ğŸ‡­ğŸ‡°
            - ğŸ‡¹ğŸ‡¼
            - ğŸ‡¸ğŸ‡¬
            - ğŸ‡¯ğŸ‡µ
            - ğŸ‡ºğŸ‡¸
            - ğŸ³ï¸
        - name: ğŸ¬å“”å“©å“”å“©
          type: select
          proxies:
            - ğŸš€ç›´æ¥è¿æ¥
            - ğŸ‡­ğŸ‡°
            - ğŸ‡¹ğŸ‡¼
        - name: ğŸè‹¹æœæœåŠ¡
          type: select
          proxies:
            - ğŸš€ç›´æ¥è¿æ¥
            - ğŸ”°å›½å¤–æµé‡
        - name: ğŸš€ç›´æ¥è¿æ¥
          type: select
          proxies:
            - DIRECT
        - name: âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡
          type: load-balance
          url: http://www.google.com/generate_204
          interval: 300
          strategy: consistent-hashing
          proxies:
        - name: âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-ä¸­ç»§åŠ¨æ€
          type: load-balance
          url: http://www.google.com/generate_204
          interval: 300
          strategy: consistent-hashing
          proxies:
        - name: âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-ä¸­ç»§NF
          type: load-balance
          url: http://www.google.com/generate_204
          interval: 300
          strategy: consistent-hashing
          proxies:
        - name: âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-IPLC
          type: load-balance
          url: http://www.google.com/generate_204
          interval: 300
          strategy: consistent-hashing
          proxies:
        - name: ğŸ‡­ğŸ‡°
          type: select
          proxies:
        - name: ğŸ‡¹ğŸ‡¼
          type: select
          proxies:
        - name: ğŸ‡¸ğŸ‡¬
          type: select
          proxies:
        - name: ğŸ‡¯ğŸ‡µ
          type: select
          proxies:
        - name: ğŸ‡ºğŸ‡¸
          type: select
          proxies:
        - name: ğŸ³ï¸
          type: select
          proxies:
        
        # å¾€proxy groupsä¸­åŠ å…¥proxyèŠ‚ç‚¹ ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼,å¤šä¸ªè¡¨è¾¾å¼ç”¨|åˆ†éš”
        commands:
          - proxy-groups.(âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡).proxies=[]proxyNames|HK \d{3}
          - proxy-groups.(âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-ä¸­ç»§åŠ¨æ€).proxies=[]proxyNames|é¦™æ¸¯.+ä¸­ç»§\såŠ¨æ€
          - proxy-groups.(âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-ä¸­ç»§NF).proxies=[]proxyNames|é¦™æ¸¯.+ä¸­ç»§\sNF
          - proxy-groups.(âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-IPLC).proxies=[]proxyNames|IPLC.*é¦™æ¸¯
          - proxy-groups.(ğŸ‡­ğŸ‡°).proxies=[]proxyNames|é¦™æ¸¯|HK
          - proxy-groups.(ğŸ‡¹ğŸ‡¼).proxies=[]proxyNames|å°æ¹¾|TW
          - proxy-groups.(ğŸ‡¸ğŸ‡¬).proxies=[]proxyNames|ç‹®åŸ|æ–°åŠ å¡|SG
          - proxy-groups.(ğŸ‡¯ğŸ‡µ).proxies=[]proxyNames|æ—¥æœ¬|JP
          - proxy-groups.(ğŸ‡ºğŸ‡¸).proxies=[]proxyNames|ç¾å›½|US
          - proxy-groups.(ğŸ³ï¸).proxies=[]proxyNames|éŸ©å›½|è‹±å›½|ä¿„ç½—æ–¯|é˜¿æ ¹å»·|é©¬æ¥|åœŸè€³å…¶|RU

        # é…ç½®è‡ªå®šä¹‰è§„åˆ™
        prepend-rules:
          - DOMAIN-SUFFIX,googlevideo.com,ğŸ¬å›½å¤–åª’ä½“-è§†é¢‘
          - DOMAIN-SUFFIX,ttvnw.net,ğŸ¬å›½å¤–åª’ä½“-è§†é¢‘
          - IP-CIDR,91.108.56.0/22,ğŸ¬å›½å¤–åª’ä½“-è§†é¢‘,no-resolve
          - DOMAIN-SUFFIX,biliapi.com,ğŸ¬å“”å“©å“”å“©
          - DOMAIN-SUFFIX,biliapi.net,ğŸ¬å“”å“©å“”å“©
          - DOMAIN-SUFFIX,bilibili.com,ğŸ¬å“”å“©å“”å“©
          - DOMAIN-SUFFIX,bilibili.tv,ğŸ¬å“”å“©å“”å“©
          - DOMAIN-SUFFIX,bilivideo.com,ğŸ¬å“”å“©å“”å“©
          - DOMAIN-SUFFIX,netflix.com,ğŸ“½Netflix
          - DOMAIN-SUFFIX,netflix.net,ğŸ“½Netflix
          - DOMAIN-SUFFIX,nflxext.com,ğŸ“½Netflix
          - DOMAIN-SUFFIX,nflximg.com,ğŸ“½Netflix
          - DOMAIN-SUFFIX,nflximg.net,ğŸ“½Netflix
          - DOMAIN-SUFFIX,nflxso.net,ğŸ“½Netflix
          - DOMAIN-SUFFIX,nflxvideo.net,ğŸ“½Netflix
          - DOMAIN-SUFFIX,netflixdnstest0.com,ğŸ“½Netflix
          - DOMAIN-SUFFIX,netflixdnstest1.com,ğŸ“½Netflix
          - DOMAIN-SUFFIX,netflixdnstest2.com,ğŸ“½Netflix
          - DOMAIN-SUFFIX,netflixdnstest3.com,ğŸ“½Netflix
          - DOMAIN-SUFFIX,netflixdnstest4.com,ğŸ“½Netflix
          - DOMAIN-SUFFIX,netflixdnstest5.com,ğŸ“½Netflix
          - DOMAIN-SUFFIX,netflixdnstest6.com,ğŸ“½Netflix
          - DOMAIN-SUFFIX,netflixdnstest7.com,ğŸ“½Netflix
          - DOMAIN-SUFFIX,netflixdnstest8.com,ğŸ“½Netflix
          - DOMAIN-SUFFIX,netflixdnstest9.com,ğŸ“½Netflix
          - IP-CIDR,23.246.0.0/18,ğŸ“½Netflix,no-resolve
          - IP-CIDR,37.77.184.0/21,ğŸ“½Netflix,no-resolve
          - IP-CIDR,45.57.0.0/17,ğŸ“½Netflix,no-resolve
          - IP-CIDR,64.120.128.0/17,ğŸ“½Netflix,no-resolve
          - IP-CIDR,66.197.128.0/17,ğŸ“½Netflix,no-resolve
          - IP-CIDR,108.175.32.0/20,ğŸ“½Netflix,no-resolve
          - IP-CIDR,192.173.64.0/18,ğŸ“½Netflix,no-resolve
          - IP-CIDR,198.38.96.0/19,ğŸ“½Netflix,no-resolve
          - IP-CIDR,198.45.48.0/20,ğŸ“½Netflix,no-resolve
          # é…ç½®Githubä¸Šçš„è§„åˆ™é›†
          - RULE-SET,applications,DIRECT
          - DOMAIN,clash.razord.top,DIRECT
          - DOMAIN,yacd.haishan.me,DIRECT
          - RULE-SET,private,DIRECT
          - RULE-SET,reject,REJECT
          - RULE-SET,icloud,ğŸè‹¹æœæœåŠ¡
          - RULE-SET,apple,ğŸè‹¹æœæœåŠ¡
          - RULE-SET,google,ğŸ”°å›½å¤–æµé‡
          - RULE-SET,proxy,ğŸ’¬å›½å¤–åª’ä½“-æ–‡å­—å›¾ç‰‡
          - RULE-SET,direct,DIRECT
          - RULE-SET,lancidr,DIRECT
          - RULE-SET,cncidr,DIRECT
          - RULE-SET,telegramcidr,âœˆï¸Telegram
          - GEOIP,LAN,DIRECT,no-resolve
          - GEOIP,CN,DIRECT,no-resolve
          - MATCH,âš“ï¸å…¶ä»–æµé‡
        # å¼•ç”¨Githubä¸Šçš„è§„åˆ™é›†
        mix-rule-providers:
          reject:
            type: http
            behavior: domain
            url: https://testingcf.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/reject.txt
            path: ./ruleset/reject.yaml
            interval: 86400
          icloud:
            type: http
            behavior: domain
            url: https://testingcf.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/icloud.txt
            path: ./ruleset/icloud.yaml
            interval: 86400
          apple:
            type: http
            behavior: domain
            url: https://testingcf.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/apple.txt
            path: ./ruleset/apple.yaml
            interval: 86400
          google:
            type: http
            behavior: domain
            url: https://testingcf.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/google.txt
            path: ./ruleset/google.yaml
            interval: 86400
          proxy:
            type: http
            behavior: domain
            url: https://testingcf.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/proxy.txt
            path: ./ruleset/proxy.yaml
            interval: 86400
          direct:
            type: http
            behavior: domain
            url: https://testingcf.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/direct.txt
            path: ./ruleset/direct.yaml
            interval: 86400
          private:
            type: http
            behavior: domain
            url: https://testingcf.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/private.txt
            path: ./ruleset/private.yaml
            interval: 86400
          gfw:
            type: http
            behavior: domain
            url: https://testingcf.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/gfw.txt
            path: ./ruleset/gfw.yaml
            interval: 86400
          tld-not-cn:
            type: http
            behavior: domain
            url: https://testingcf.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/tld-not-cn.txt
            path: ./ruleset/tld-not-cn.yaml
            interval: 86400
          telegramcidr:
            type: http
            behavior: ipcidr
            url: https://testingcf.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/telegramcidr.txt
            path: ./ruleset/telegramcidr.yaml
            interval: 86400
          cncidr:
            type: http
            behavior: ipcidr
            url: https://testingcf.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/cncidr.txt
            path: ./ruleset/cncidr.yaml
            interval: 86400
          lancidr:
            type: http
            behavior: ipcidr
            url: https://testingcf.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/lancidr.txt
            path: ./ruleset/lancidr.yaml
            interval: 86400
          applications:
            type: http
            behavior: classical
            url: https://testingcf.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/applications.txt
            path: ./ruleset/applications.yaml
            interval: 86400